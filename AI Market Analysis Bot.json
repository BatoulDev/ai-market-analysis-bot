{
  "name": "AI Market Analysis Bot",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -144,
        0
      ],
      "id": "e609b878-977d-4226-85b9-0b48ab317d26",
      "name": "Telegram Trigger",
      "webhookId": "35ba4a04-36b4-4ee4-98eb-d29fd6a30c11",
      "credentials": {
        "telegramApi": {
          "id": "hzUucFWrHcaeKjJ0",
          "name": "market analysis bot"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://api.twelvedata.com/time_series?symbol={{ $json.symbol }}&interval=15min&outputsize=400&apikey=f6be62398937457e853d180a3dfa6e47",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        368,
        -304
      ],
      "id": "82360a99-036d-4462-a510-cc793a0c19d2",
      "name": "Get Candles 15m",
      "notes": "We built a dynamic API request that takes the symbol generated in n8n (like XAU/USD), inserts it into the TwelveData endpoint, and fetches 15-minute market price data using your API key."
    },
    {
      "parameters": {
        "url": "=https://api.twelvedata.com/time_series?symbol={{ $json.symbol }}&interval=5min&outputsize=500&apikey=f6be62398937457e853d180a3dfa6e47",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        368,
        -96
      ],
      "id": "f3f89550-cc6f-4997-a43c-23ad1af7d839",
      "name": "Get Candles 5m",
      "notes": "We built a dynamic API request that takes the symbol generated in n8n (like XAU/USD), inserts it into the TwelveData endpoint, and fetches 15-minute market price data using your API key."
    },
    {
      "parameters": {
        "url": "=https://api.twelvedata.com/time_series?symbol={{ $json.symbol }}&interval=1h&outputsize=300&apikey=f6be62398937457e853d180a3dfa6e47",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        384,
        128
      ],
      "id": "73f2553e-9785-428e-9066-53fe24d9039c",
      "name": "Get Candles 1h",
      "notes": "We built a dynamic API request that takes the symbol generated in n8n (like XAU/USD), inserts it into the TwelveData endpoint, and fetches 15-minute market price data using your API key."
    },
    {
      "parameters": {
        "url": "=https://api.twelvedata.com/time_series?symbol={{ $json.symbol }}&interval=4h&outputsize=200&apikey=f6be62398937457e853d180a3dfa6e47",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        400,
        352
      ],
      "id": "5ae00f9f-1210-452c-9446-aa253a0051df",
      "name": "Get Candles 4h",
      "notes": "We built a dynamic API request that takes the symbol generated in n8n (like XAU/USD), inserts it into the TwelveData endpoint, and fetches 15-minute market price data using your API key."
    },
    {
      "parameters": {
        "url": "=https://api.twelvedata.com/time_series?symbol={{ $json.symbol }}&interval=1day&outputsize=150&apikey=f6be62398937457e853d180a3dfa6e47",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        400,
        560
      ],
      "id": "d7c49c46-e087-4215-8cce-b385570ab40d",
      "name": "Get Candles 1D",
      "notes": "We built a dynamic API request that takes the symbol generated in n8n (like XAU/USD), inserts it into the TwelveData endpoint, and fetches 15-minute market price data using your API key."
    },
    {
      "parameters": {
        "url": "=https://api.twelvedata.com/time_series?symbol={{ $json.symbol }}&interval=1week&outputsize=100&apikey=f6be62398937457e853d180a3dfa6e47",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        400,
        752
      ],
      "id": "5cacfbc5-1da1-4d88-8946-ac64047ebf35",
      "name": "Get Candles 1Week",
      "notes": "We built a dynamic API request that takes the symbol generated in n8n (like XAU/USD), inserts it into the TwelveData endpoint, and fetches 15-minute market price data using your API key."
    },
    {
      "parameters": {
        "fieldToSplitOut": "values",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        560,
        -96
      ],
      "id": "9123d59c-94b6-408c-99c8-6fad7309898c",
      "name": "5m â€“ Split Candles"
    },
    {
      "parameters": {
        "jsCode": "// Make a copy before sorting\nconst sortedItems = [...items].sort(function(a, b) {\n  const dateA = a.json.datetime ? new Date(a.json.datetime) : new Date(0);\n  const dateB = b.json.datetime ? new Date(b.json.datetime) : new Date(0);\n  return dateA.getTime() - dateB.getTime();\n});\n\n// Take last 5 candles\nconst mostRecent = sortedItems.slice(-200);\n\n// Format output (without volume)\nconst formattedKlines = mostRecent.map(item => {\n  const candle = item.json;\n\n  return {\n    timestamp: candle.datetime || null,\n    open: candle.open ? parseFloat(candle.open) : 0,\n    high: candle.high ? parseFloat(candle.high) : 0,\n    low: candle.low ? parseFloat(candle.low) : 0,\n    close: candle.close ? parseFloat(candle.close) : 0\n  };\n});\n\nreturn [\n  {\n    json: {\n      recentKlines: formattedKlines\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        -96
      ],
      "id": "b709b9f3-fb99-4522-a0f3-c9c20ebfa839",
      "name": "5m â€“ Prepare Data"
    },
    {
      "parameters": {
        "jsCode": "// Make a copy before sorting\nconst sortedItems = [...items].sort(function(a, b) {\n  const dateA = a.json.datetime ? new Date(a.json.datetime) : new Date(0);\n  const dateB = b.json.datetime ? new Date(b.json.datetime) : new Date(0);\n  return dateA.getTime() - dateB.getTime();\n});\n\n// Take last 5 candles\nconst mostRecent = sortedItems.slice(-120);\n\n// Format output (without volume)\nconst formattedKlines = mostRecent.map(item => {\n  const candle = item.json;\n\n  return {\n    timestamp: candle.datetime || null,\n    open: candle.open ? parseFloat(candle.open) : 0,\n    high: candle.high ? parseFloat(candle.high) : 0,\n    low: candle.low ? parseFloat(candle.low) : 0,\n    close: candle.close ? parseFloat(candle.close) : 0\n  };\n});\n\nreturn [\n  {\n    json: {\n      recentKlines: formattedKlines\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        128
      ],
      "id": "2259137b-6c09-4a5a-b5e8-906bb7afa0b4",
      "name": "1hâ€“ Prepare Data"
    },
    {
      "parameters": {
        "jsCode": "// Make a copy before sorting\nconst sortedItems = [...items].sort(function(a, b) {\n  const dateA = a.json.datetime ? new Date(a.json.datetime) : new Date(0);\n  const dateB = b.json.datetime ? new Date(b.json.datetime) : new Date(0);\n  return dateA.getTime() - dateB.getTime();\n});\n\n// Take last 150 candles\nconst mostRecent = sortedItems.slice(-150);\n\n// Format output (without volume)\nconst formattedKlines = mostRecent.map(item => {\n  const candle = item.json;\n\n  return {\n    timestamp: candle.datetime || null,\n    open: candle.open ? parseFloat(candle.open) : 0,\n    high: candle.high ? parseFloat(candle.high) : 0,\n    low: candle.low ? parseFloat(candle.low) : 0,\n    close: candle.close ? parseFloat(candle.close) : 0\n  };\n});\n\nreturn [\n  {\n    json: {\n      recentKlines: formattedKlines\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        -304
      ],
      "id": "94762b5d-4ae3-4546-9dca-5bae3d29f0cd",
      "name": "15m â€“ Prepare Data",
      "notes": "This code prepares candle data for technical analysis.\n\n1. It creates a copy of all incoming candles and sorts them by datetime (oldest to newest).\n2. It selects the last 150 candles for analysis.\n3. It converts open, high, low, and close values from strings to numeric values.\n4. It returns the cleaned and formatted candle data inside \"recentKlines\".\n\nThis ensures the data is properly ordered, numerically formatted, and ready for indicator calculations such as RSI or EMA."
    },
    {
      "parameters": {
        "jsCode": "// Make a copy before sorting\nconst sortedItems = [...items].sort(function(a, b) {\n  const dateA = a.json.datetime ? new Date(a.json.datetime) : new Date(0);\n  const dateB = b.json.datetime ? new Date(b.json.datetime) : new Date(0);\n  return dateA.getTime() - dateB.getTime();\n});\n\n// Take last 5 candles\nconst mostRecent = sortedItems.slice(-100);\n\n// Format output (without volume)\nconst formattedKlines = mostRecent.map(item => {\n  const candle = item.json;\n\n  return {\n    timestamp: candle.datetime || null,\n    open: candle.open ? parseFloat(candle.open) : 0,\n    high: candle.high ? parseFloat(candle.high) : 0,\n    low: candle.low ? parseFloat(candle.low) : 0,\n    close: candle.close ? parseFloat(candle.close) : 0\n  };\n});\n\nreturn [\n  {\n    json: {\n      recentKlines: formattedKlines\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        784,
        352
      ],
      "id": "38fae160-5e7b-44fb-b2d8-a45ed7cbcdf7",
      "name": "4h â€“ Prepare Data"
    },
    {
      "parameters": {
        "jsCode": "// Make a copy before sorting\nconst sortedItems = [...items].sort(function(a, b) {\n  const dateA = a.json.datetime ? new Date(a.json.datetime) : new Date(0);\n  const dateB = b.json.datetime ? new Date(b.json.datetime) : new Date(0);\n  return dateA.getTime() - dateB.getTime();\n});\n\n// Take last 5 candles\nconst mostRecent = sortedItems.slice(-60);\n\n// Format output (without volume)\nconst formattedKlines = mostRecent.map(item => {\n  const candle = item.json;\n\n  return {\n    timestamp: candle.datetime || null,\n    open: candle.open ? parseFloat(candle.open) : 0,\n    high: candle.high ? parseFloat(candle.high) : 0,\n    low: candle.low ? parseFloat(candle.low) : 0,\n    close: candle.close ? parseFloat(candle.close) : 0\n  };\n});\n\nreturn [\n  {\n    json: {\n      recentKlines: formattedKlines\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        784,
        560
      ],
      "id": "5cc1b603-d554-4bdf-bf9b-761de39ff941",
      "name": "1D â€“ Prepare Data"
    },
    {
      "parameters": {
        "jsCode": "// Make a copy before sorting\nconst sortedItems = [...items].sort(function(a, b) {\n  const dateA = a.json.datetime ? new Date(a.json.datetime) : new Date(0);\n  const dateB = b.json.datetime ? new Date(b.json.datetime) : new Date(0);\n  return dateA.getTime() - dateB.getTime();\n});\n\n// Take last 5 candles\nconst mostRecent = sortedItems.slice(-40);\n\n// Format output (without volume)\nconst formattedKlines = mostRecent.map(item => {\n  const candle = item.json;\n\n  return {\n    timestamp: candle.datetime || null,\n    open: candle.open ? parseFloat(candle.open) : 0,\n    high: candle.high ? parseFloat(candle.high) : 0,\n    low: candle.low ? parseFloat(candle.low) : 0,\n    close: candle.close ? parseFloat(candle.close) : 0\n  };\n});\n\nreturn [\n  {\n    json: {\n      recentKlines: formattedKlines\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        800,
        752
      ],
      "id": "172c51d5-8936-4a24-83a6-1308480ca665",
      "name": "1W â€“ Prepare Data"
    },
    {
      "parameters": {
        "fieldToSplitOut": "values",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        560,
        -304
      ],
      "id": "422fcd0c-f0a4-461b-a511-5679f6774509",
      "name": "15m â€“ Split Candles"
    },
    {
      "parameters": {
        "fieldToSplitOut": "values",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        560,
        128
      ],
      "id": "6761ed76-f18c-433c-bcfa-26f16a18c1b9",
      "name": "1H â€“ Split Candles"
    },
    {
      "parameters": {
        "fieldToSplitOut": "values",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        576,
        352
      ],
      "id": "f43006c1-1517-4606-84af-a36c0b306029",
      "name": "4H â€“ Split Candles"
    },
    {
      "parameters": {
        "fieldToSplitOut": "values",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        576,
        560
      ],
      "id": "73fa4b1d-23c7-49c9-8ccd-5b30567651ca",
      "name": "1D â€“ Split Candles"
    },
    {
      "parameters": {
        "fieldToSplitOut": "values",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        592,
        752
      ],
      "id": "05b83334-61ca-4301-b46a-29ffb69af07c",
      "name": "1W â€“ Split Candles"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f3917c2-d230-4705-9258-76cdad02742a",
              "name": "recentKlines",
              "value": "={{ $json.recentKlines }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        976,
        -304
      ],
      "id": "c99505ae-11aa-4429-9b30-137d02820479",
      "name": "15m â€“ Structure Engine"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f3917c2-d230-4705-9258-76cdad02742a",
              "name": "recentKlines",
              "value": "={{ $json.recentKlines }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        992,
        128
      ],
      "id": "e64dba1c-918b-4a1d-b128-79eb393fabb1",
      "name": "1h â€“ Structure Engine"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f3917c2-d230-4705-9258-76cdad02742a",
              "name": "recentKlines",
              "value": "={{ $json.recentKlines }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        992,
        352
      ],
      "id": "18ed1b09-8b51-4a85-a1c6-50fed4b4c5c0",
      "name": "4h â€“ Structure Engine"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f3917c2-d230-4705-9258-76cdad02742a",
              "name": "recentKlines",
              "value": "={{ $json.recentKlines }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1008,
        560
      ],
      "id": "9acad0d2-be63-42b1-b852-4dbcaedd3cf1",
      "name": "1D â€“ Structure Engine"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f3917c2-d230-4705-9258-76cdad02742a",
              "name": "recentKlines",
              "value": "={{ $json.recentKlines }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1008,
        752
      ],
      "id": "b6fc79d3-2886-4f19-994f-a8d6eeda2b91",
      "name": "1Wâ€“ Structure Engine1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f3917c2-d230-4705-9258-76cdad02742a",
              "name": "recentKlines",
              "value": "={{ $json.recentKlines }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        976,
        -96
      ],
      "id": "8219caf9-0e3c-4f23-bd51-0e7cd988929f",
      "name": "5m â€“ Structure Engine"
    },
    {
      "parameters": {
        "jsCode": "const symbol = $json.symbol;\n\nlet newsQuery = \"\";\n\nif (symbol.includes(\"XAU\")) {\n  newsQuery = \"Gold OR XAUUSD OR Federal Reserve OR Inflation OR US Dollar\";\n} \nelse if (symbol.includes(\"EUR\")) {\n  newsQuery = \"Euro OR ECB OR Interest rates OR US Dollar\";\n} \nelse if (symbol.includes(\"US30\")) {\n  newsQuery = \"Dow Jones OR Federal Reserve OR US economy OR CPI\";\n} \nelse {\n  newsQuery = symbol + \" OR financial markets OR central bank\";\n}\n\nreturn [{\n  json: {\n    symbol,\n    newsQuery\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        416,
        1024
      ],
      "id": "8d128a53-db3c-4f03-8332-a4087a65874c",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "url": "https://newsapi.org/v2/everything",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "q",
              "value": "={{ $json.newsQuery }}"
            },
            {
              "name": "from",
              "value": "={{ new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0] }}"
            },
            {
              "name": "sortBy",
              "value": "publishedAt"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        640,
        1024
      ],
      "id": "4a745a5a-bf86-4462-8c10-13fa27f4e6fe",
      "name": "Dynamic News Filter Engine",
      "credentials": {
        "httpQueryAuth": {
          "id": "j8Ex8YIXN2W6NY9G",
          "name": "api key"
        }
      },
      "notes": "This node sends a GET request to the NewsAPI /everything endpoint, dynamically building the URL with query parameters (q, from, sortBy, apiKey). When executed, the API receives the full URL, processes the search keywords related to the selected trading symbol, filters articles from the last 3 days, sorts them by most recent publication date, and returns structured JSON news data relevant to that market."
    },
    {
      "parameters": {
        "jsCode": "// Get articles array safely\nconst articles = $json.articles || [];\n\n// Keep only valid articles with title & description\nconst filteredArticles = articles\n  .filter(article => article.title && article.description)\n  .slice(0, 10) // take only first 10 (latest ones)\n  .map(article => ({\n    title: article.title,\n    description: article.description,\n    source: article.source?.name || null,\n    publishedAt: article.publishedAt\n  }));\n\nreturn [\n  {\n    json: {\n      symbol: $json.symbol || null,\n      totalFetched: articles.length,\n      filteredArticles\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        848,
        1024
      ],
      "id": "851760af-7c51-49ac-9a75-a11d90d84bcc",
      "name": "Code in JavaScript2",
      "notes": "1ï¸âƒ£ Ø¨ÙŠØ§Ø®Ø¯ articles Ù…Ù† NewsAPI\n2ï¸âƒ£ Ø¨ÙŠØªØ£ÙƒØ¯ Ø¥Ù†Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†\n3ï¸âƒ£ Ø¨ÙŠØ´ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù„ÙŠ Ù…Ø§ ÙÙŠÙ‡Ø§ title Ø£Ùˆ description\n4ï¸âƒ£ Ø¨ÙŠØ§Ø®Ø¯ Ø£ÙˆÙ„ 10 (Ù„Ø­ØªÙ‰ Ù…Ø§ ØªØ­Ù„Ù„ÙŠ 1000 Ø®Ø¨Ø±)\n5ï¸âƒ£ Ø¨ÙŠØ±Ø¬Ø¹Ù‡Ù… Ø¨Ø´ÙƒÙ„ Ù…Ø±ØªØ¨ ÙˆÙ†Ø¸ÙŠÙ"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "responses": {
          "values": [
            {
              "content": "=Ø£Ù†Øª Ù…Ø­Ù„Ù„ Ù…Ø´Ø§Ø¹Ø± Ø°ÙƒÙŠ ÙˆØ¯Ù‚ÙŠÙ‚ Ù…ØªØ®ØµØµ ÙÙŠ Ø£Ø³ÙˆØ§Ù‚ Ø§Ù„ÙÙˆØ±ÙƒØ³ ÙˆØ§Ù„Ø°Ù‡Ø¨ ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª (Ù…Ø«Ù„ XAUUSD Ùˆ EURUSD Ùˆ US30). Ø­Ù„Ù„ Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ù‚Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù‡Ø¬ Ù…Ù† Ø¬Ø²Ø¦ÙŠÙ†:\n\nØ§Ù„Ù…Ø´Ø§Ø¹Ø± Ù‚ØµÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ù‰:\nâ€“ Ù‚ÙŠÙ… Ø±Ø¯Ø© ÙØ¹Ù„ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ÙÙˆØ±ÙŠØ©ØŒ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø­Ø¯ÙŠØ«Ø©ØŒ ÙˆØ§Ù„ØªÙ‚Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙˆØ¬/Ø§Ù„Ø£ØµÙ„ Ø§Ù„Ù…Ø°ÙƒÙˆØ±.\nâ€“ Ø­Ø¯Ø¯ ÙØ¦Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø±: \"Ø¥ÙŠØ¬Ø§Ø¨ÙŠ\"ØŒ \"Ù…Ø­Ø§ÙŠØ¯\"ØŒ Ø£Ùˆ \"Ø³Ù„Ø¨ÙŠ\".\nâ€“ Ø§Ø­Ø³Ø¨ Ù†Ù‚Ø§Ø· Ø±Ù‚Ù…ÙŠØ© Ø¨ÙŠÙ† -1 (Ø³Ù„Ø¨ÙŠ Ø¬Ø¯Ø§Ù‹) Ùˆ 1 (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ Ø¬Ø¯Ø§Ù‹).\nâ€“ Ù‚Ø¯Ù… Ù…Ø¨Ø±Ø±Ø§Ù‹ Ù…ÙˆØ¬Ø²Ø§Ù‹ ÙŠØ´Ø±Ø­ Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ù‚ØµÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ù‰ Ù…Ø¹ Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ù†Ø§Ø³Ø¨Ø© ØªØ±Ø¨Ø· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø¨Ø§Ù„Ø£ØµÙ„ (Ù…Ø«Ø§Ù„: Ø§Ù„Ø°Ù‡Ø¨ ÙŠØªØ£Ø«Ø± Ø¨Ù€ Ø§Ù„ÙØ§Ø¦Ø¯Ø©/Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±/Ø§Ù„ØªØ¶Ø®Ù…).\n\nØ§Ù„Ù…Ø´Ø§Ø¹Ø± Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰:\nâ€“ Ù‚ÙŠÙ… Ù†Ø¸Ø±Ø© Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø§Ù…Ø©ØŒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§ØªØŒ ÙˆØ§Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ø£Ùˆ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø§Ù„ÙƒÙ„ÙŠØ© (Ø§Ù„ÙØ§Ø¦Ø¯Ø©ØŒ Ø§Ù„ØªØ¶Ø®Ù…ØŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦ÙØŒ ØªØµØ±ÙŠØ­Ø§Øª Ø§Ù„ÙÙŠØ¯Ø±Ø§Ù„ÙŠ/ECB...).\nâ€“ Ø­Ø¯Ø¯ ÙØ¦Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø±: \"Ø¥ÙŠØ¬Ø§Ø¨ÙŠ\"ØŒ \"Ù…Ø­Ø§ÙŠØ¯\"ØŒ Ø£Ùˆ \"Ø³Ù„Ø¨ÙŠ\".\nâ€“ Ø§Ø­Ø³Ø¨ Ù†Ù‚Ø§Ø· Ø±Ù‚Ù…ÙŠØ© Ø¨ÙŠÙ† -1 (Ø³Ù„Ø¨ÙŠ Ø¬Ø¯Ø§Ù‹) Ùˆ 1 (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ Ø¬Ø¯Ø§Ù‹).\nâ€“ Ù‚Ø¯Ù… Ù…Ø¨Ø±Ø±Ø§Ù‹ Ù…ÙØµÙ„Ø§Ù‹ ÙŠØ´Ø±Ø­ Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰ Ù…Ø¹ Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ù†Ø§Ø³Ø¨Ø© ØªØ±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¨Ø§Ù„Ø£ØµÙ„.\n\nÙ…Ù‡Ù… Ø¬Ø¯Ø§Ù‹:\n- Ø­Ù„Ù‘Ù„ â€œØ£Ø«Ø± Ø§Ù„Ø®Ø¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£ØµÙ„â€ ÙˆÙ„ÙŠØ³ ÙÙ‚Ø· â€œØ¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ø§Ù„Ø®Ø¨Ø± Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù…â€.\n- Ø¥Ø°Ø§ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ØºÙŠØ± Ù…Ø±ØªØ¨Ø·Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø§Ù„Ø£ØµÙ„ØŒ Ù‚Ù„ Ø°Ù„Ùƒ ÙˆØ§Ø¹ØªØ¨Ø± Ø§Ù„Ù…Ø´Ø§Ø¹Ø± \"Ù…Ø­Ø§ÙŠØ¯\" Ù…Ø¹ Ø¯Ø±Ø¬Ø© Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† 0.\n\nÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¥Ø®Ø±Ø§Ø¬Ùƒ Ø¨Ø§Ù„Ø¶Ø¨Ø· ÙƒØ§Ø¦Ù† JSON Ù…Ø¹ Ù…ÙØªØ§Ø­ÙŠÙ† ÙÙ‚Ø·:\n\"shortTermSentiment\" Ùˆ \"longTermSentiment\".\nÙ‚ÙŠÙ…Ø© ÙƒÙ„ Ù…ÙØªØ§Ø­ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ÙƒØ§Ø¦Ù† Ù…Ø¹ Ø«Ù„Ø§Ø«Ø© Ù…ÙØ§ØªÙŠØ­: \"category\"ØŒ \"score\"ØŒ Ùˆ \"rationale\".\nÙ„Ø§ ØªØ®Ø±Ø¬ Ø£ÙŠ Ù†Øµ Ø¥Ø¶Ø§ÙÙŠ.\n\nØ§Ù„Ù†Øµ Ù„ØªØ­Ù„ÙŠÙ„Ù‡ (JSON Ù…Ù‚Ø§Ù„Ø§Øª):\n{{ JSON.stringify($json.filteredArticles) }}"
            }
          ]
        },
        "builtInTools": {},
        "options": {
          "textFormat": {
            "textOptions": {
              "type": "json_object"
            }
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        1072,
        1024
      ],
      "id": "8d68f936-2b0c-4a26-ad31-6c63a4538759",
      "name": "Message a model",
      "credentials": {
        "openAiApi": {
          "id": "FOyt8lmzygjunRfj",
          "name": "OpenAi account"
        }
      },
      "notes": "This prompt analyzes financial news articles and generates structured short-term and long-term market sentiment specifically tailored for Forex, gold, and indices trading decisions."
    },
    {
      "parameters": {
        "numberInputs": 6
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1536,
        16
      ],
      "id": "8c0ca5f6-cfd5-4d0c-b777-2d04be8681fe",
      "name": "Merge Timeframes",
      "notes": "The Merge node combines all timeframe structure outputs into a single unified dataset to enable multi-timeframe confluence and final trading decision logic."
    },
    {
      "parameters": {
        "jsCode": "// \"items\" Ù‡ÙŠ Ù…ØµÙÙˆÙØ© Ù…Ù† 3000 Ø¨Ù†Ø¯ Ù…Ù† Ø¹Ù‚Ø¯Ø© Ø§Ù„Ø¯Ù…Ø¬\n// Ø³Ù†Ø¬Ù…Ø¹Ù‡Ø§ ÙƒÙ„Ù‡Ø§ ÙÙŠ Ù…ØµÙÙˆÙØ© ÙˆØ§Ø­Ø¯Ø© ØªØ³Ù…Ù‰ \"allCandles\"\nconst allCandles = [];\n\n// ØªÙƒØ±Ø§Ø± Ø¹Ø¨Ø± ÙƒÙ„ Ø¨Ù†Ø¯\nfor (const item of items) {\n  allCandles.push(item.json);\n}\n\n// Ø¥Ø±Ø¬Ø§Ø¹ Ø¨Ù†Ø¯ ÙˆØ§Ø­Ø¯ Ù…Ø¹ Ø®Ø§ØµÙŠØ© ØªØ³Ù…Ù‰ \"allCandles\" (Ù…ØµÙÙˆÙØ© Ù…Ù† 3000)\nreturn [\n  {\n    json: {\n      allCandles\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1792,
        80
      ],
      "id": "a76a9d7d-c746-4bf8-8e29-23ebedc33023",
      "name": "Build Unified Candle Array",
      "notes": "After using the Merge (Append mode) node, all candles from different timeframes are collected as separate items.\n\nThe code then loops through those items and combines them into a single array called allCandles, returning one unified dataset for further multi-timeframe analysis."
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2016,
        96
      ],
      "id": "4602cd84-b341-4676-8180-1303b58a53ed",
      "name": "Merge Technical & News"
    },
    {
      "parameters": {
        "jsCode": "// Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\nconst allCandles = [];\nlet contentData = null;\n\n// Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ø¨Ø± ÙƒÙ„ Ø¨Ù†Ø¯ Ù…Ù† Ø¹Ù‚Ø¯Ø© Ø§Ù„Ø¯Ù…Ø¬\nfor (const item of items) {\n  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ù†Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ù…ÙˆØ¹ØŒ Ø£Ø¶ÙÙ‡Ø§ Ù„Ù„Ù…ØµÙÙˆÙØ©\n  if (item.json.allCandles !== undefined) {\n    // Ø§ÙØªØ±Ø§Ø¶ Ø£Ù† item.json.allCandles Ù‡ÙŠ Ù…ØµÙÙˆÙØ©\n    allCandles.push(...item.json.allCandles);\n  }\n\n  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ù†Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ù…Ø¯Ù…Ø¬ (ÙÙŠ message.content)ØŒ Ø§Ø­ÙØ¸Ù‡\n  if (item.json.message && item.json.message.content !== undefined) {\n    contentData = item.json.message.content;\n  }\n}\n\n// Ø¥Ø±Ø¬Ø§Ø¹ Ø¨Ù†Ø¯ ÙˆØ§Ø­Ø¯ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ù…ÙˆØ¹ ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰\nreturn [{\n  json: {\n    allCandles,\n    content: contentData\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2208,
        96
      ],
      "id": "ef6081d3-470a-4f40-b93d-f4a4e10c4df4",
      "name": "Final Market Context Builder",
      "notes": "This code consolidates merged candle data and extracted news/AI content into a single unified object, enabling combined technical and fundamental analysis in the next decision stage."
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Ù‡Ø§ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© Ù„Ù„Ø³ÙˆÙ‚ Ù„Ù€ {{ $('this').first().json.symbol }} Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©:\n\nØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©:\n{{ JSON.stringify($json[\"allCandles\"]) }}\n\nØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±:\n{{ JSON.stringify($json[\"content\"]) }}\n",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Ø£Ù†Øª Ù…Ø­Ù„Ù„ ØªØ¯Ø§ÙˆÙ„ ÙŠØ®Ø±Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª JSON ÙÙ‚Ø·. Ù„Ø§ ØªÙƒØªØ¨ Ø£ÙŠ Ø´ÙŠØ¡ Ø®Ø§Ø±Ø¬ JSON.\n\nØ­Ù„Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© (allCandles) ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø¹Ø± (content) Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ù„Ø«Ù„Ø§Ø« Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ©.\n\nØ§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: JSON object ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:\n\ntextMessage: ØªÙˆØµÙŠØ§Øª Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ù„Ù„Ø«Ù„Ø§Ø« ÙØªØ±Ø§Øª\n\nvoiceMessage: Ø´Ø±Ø­ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨\n\nØªÙ†Ø³ÙŠÙ‚ textMessage:\nÙ…Ù„Ø®Øµ ØªÙˆØµÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ… â€“ [Ø§Ù„ØªØ§Ø±ÙŠØ®]\n\nğŸ“Š ØªÙˆØµÙŠØ§Øª Ù‚ØµÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ù‰ (1-24 Ø³Ø§Ø¹Ø©):\n[Ø¥ÙŠÙ…ÙˆØ¬ÙŠ] [Ø¥Ø¬Ø±Ø§Ø¡] @ [Ø³Ø¹Ø±]\n\nÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©: [Ø³Ø¹Ø±]\n\nØ§Ù„Ù‡Ø¯Ù: [Ø³Ø¹Ø±]\n\nğŸ“Š ØªÙˆØµÙŠØ§Øª Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¯Ù‰ (1-7 Ø£ÙŠØ§Ù…):\n[Ø¥ÙŠÙ…ÙˆØ¬ÙŠ] [Ø¥Ø¬Ø±Ø§Ø¡] @ [Ø³Ø¹Ø±]\n\nÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©: [Ø³Ø¹Ø±]\n\nØ§Ù„Ù‡Ø¯Ù: [Ø³Ø¹Ø±]\n\nğŸ“Š ØªÙˆØµÙŠØ§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰ (1-4 Ø£Ø³Ø§Ø¨ÙŠØ¹):\n[Ø¥ÙŠÙ…ÙˆØ¬ÙŠ] [Ø¥Ø¬Ø±Ø§Ø¡] @ [Ø³Ø¹Ø±]\n\nÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©: [Ø³Ø¹Ø±]\n\nØ§Ù„Ù‡Ø¯Ù: [Ø³Ø¹Ø±]\n\nØ§Ø³ØªØ®Ø¯Ù…: ğŸŸ¢ Ø´Ø±Ø§Ø¡ØŒ ğŸ”´ Ø¨ÙŠØ¹ØŒ ğŸ”µ Ø§Ø­ØªÙØ§Ø¸\n\nÙ‚ÙˆØ§Ø¹Ø¯ Ù…Ù‡Ù…Ø© Ù„Ù„ØªÙˆØµÙŠØ§Øª:\n\nÙ‚ØµÙŠØ± Ø§Ù„Ù…Ø¯Ù‰: ÙˆÙ‚Ù Ø®Ø³Ø§Ø±Ø© Ø¶ÙŠÙ‚ (0.1-0.5%) ÙˆÙ‡Ø¯Ù Ù‚Ø±ÙŠØ¨ (0.2-1%)\n\nÙ…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø¯Ù‰: ÙˆÙ‚Ù Ø®Ø³Ø§Ø±Ø© Ù…ØªÙˆØ³Ø· (0.5-2%) ÙˆÙ‡Ø¯Ù Ù…Ø¹Ù‚ÙˆÙ„ (1-5%)\n\nØ·ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¯Ù‰: ÙˆÙ‚Ù Ø®Ø³Ø§Ø±Ø© ÙˆØ§Ø³Ø¹ (2-5%) ÙˆÙ‡Ø¯Ù ÙƒØ¨ÙŠØ± (5-15%)\n\nØªÙ†Ø³ÙŠÙ‚ voiceMessage:\nØ§Ø´Ø±Ø­ Ø³Ø¨Ø¨ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…:\n\ncontent.shortTermSentiment.rationale Ù„Ù„ØªÙˆØµÙŠØ© Ù‚ØµÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ù‰\n\ncontent.longTermSentiment.rationale Ù„Ù„ØªÙˆØµÙŠØ§Øª Ù…ØªÙˆØ³Ø·Ø© ÙˆØ·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰\n\nØ§Ø°ÙƒØ± Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø«Ù„Ø§Ø«\nØ§Ø±Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø¨Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª. Ù„Ø§ Ø£Ø±Ù‚Ø§Ù…. Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù„Ø¨Ù†Ø§Ù†ÙŠØ©.\n\nØ£Ø®Ø±Ø¬ JSON ÙÙ‚Ø·. Ù„Ø§ Ù†Øµ Ø¥Ø¶Ø§ÙÙŠ."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        2640,
        96
      ],
      "id": "8ec5bd7e-bfe0-465d-85b6-1dddd606c830",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        2608,
        400
      ],
      "id": "b8419876-0119-44a3-a379-661047fcdf7d",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "FOyt8lmzygjunRfj",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const coinInput = $input.first().json.message.text || \"\";\nconst ticker = coinInput.trim().toUpperCase();\n\nlet symbol;\n\n// Ø¥Ø°Ø§ ÙƒØªØ¨ XAU Ù†Ø®Ù„ÙŠÙ‡ XAU/USD\nif (ticker === \"XAU\") {\n  symbol = \"XAU/USD\";\n} else {\n  symbol = ticker + \"USDT\";\n}\n\nreturn [\n  {\n    json: { symbol }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        32,
        0
      ],
      "id": "c08541ba-c2cd-4440-a36c-74c5df026128",
      "name": "this",
      "notes": "akhdt el 3emle mn luser w zdet 3lya usd so ex saret xauusd"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"text_message\": \"Ù…Ù„Ø®Øµ ØªÙˆØµÙŠØ§Øª {{$json.today}}â€“ 08/01/2025\\n\\nğŸŸ¢ Ø´Ø±Ø§Ø¡ BTCUSDT @ 42800\\nâ€¢ ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©: 42450\\nâ€¢ Ø§Ù„Ù‡Ø¯Ù: 43500\\n\\nğŸ”µ Ø§Ø­ØªÙØ§Ø¸ BTCUSDT @ 43800\\nâ€¢ ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©: 42500\\nâ€¢ Ø§Ù„Ù‡Ø¯Ù: 44500\\n\\nØ§Ø¶Ø±Ø¨ ÙˆØ§Ù‡Ø±Ø¨ØŒ Ø¨Ø³ Ø®Ù„ÙŠÙƒ Ù…Ù†ØªØ¨Ù‡ Ù„Ù„ÙˆÙ‚Ù! â€“ Ù…Ø¹ ØªØ­ÙŠØ§ØªÙŠØŒ Ø§Ù…ÙŠØ±\",\n  \"voice_message\": \"ÙÙŠ ØªÙˆØªØ± Ù‚ØµÙŠØ± Ø§Ù„Ù…Ø¯Ù‰ Ø¨Ø³Ø¨Ø¨ ØªØ·ÙˆØ±Ø§Øª ØªÙ†Ø¸ÙŠÙ…ÙŠØ© ÙˆØ¢Ø«Ø§Ø± Ù…Ù† Ø£Ø®Ø¨Ø§Ø± Ø¹Ù† ØªØºÙŠÙŠØ±Ø§Øª Ù…Ù† Ø¬Ù‡Ø§Øª Ø±Ø³Ù…ÙŠØ©ØŒ Ø¨Ø³ Ø¨Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ø«Ù‚Ø© Ø¹Ù… ØªÙØ¨Ù†Ù‰ Ù…Ù† Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙƒØ¨Ø§Ø± ÙˆØ§Ù‡ØªÙ…Ø§Ù… Ù…Ø¤Ø³Ø³ÙŠ Ø¹Ù… ÙŠØ¹Ø·ÙŠ Ø¯Ø¹Ø§Ù…Ø© Ù„Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø£ÙƒØ¨Ø±. Ø§Ù„Ø³ÙˆÙ‚ Ø¹Ù… ÙŠØ­Ø§ÙˆÙ„ ÙŠØ«Ø¨Øª Ø­Ø§Ù„Ù‡ Ø¨Ø¹Ø¯ ØªÙ‚Ù„Ø¨ØŒ ÙˆØ¥Ø°Ø§ Ø´ÙÙ†Ø§ ØªØ£ÙƒÙŠØ¯ Ø¨Ø³ÙŠØ· Ù…Ù† Ø§Ù„Ø¯Ø¹Ù… Ù…Ø¹ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø­Ø¬Ù… Ø§Ù„Ø´Ø±Ø§Ø¡ ÙØ¨ÙÙŠ ÙØ±ØµØ© Ù„Ù„Ø§Ø±ØªÙØ§Ø¹. Ø¥Ø°Ø§ Ø±Ø¬Ø¹Øª Ø§Ù„Ø­Ø±ÙƒØ© ØªØªØ±Ø¯Ø¯ Ø¨Ø¯ÙˆÙ† Ø¯Ø¹Ù… ÙˆØ§Ø¶Ø­ØŒ Ø§Ù„Ø£ÙØ¶Ù„ ØªØ¶Ù„ Ø¨Ø§Ù„Ø­ÙŠØ·Ø© Ù„Ø­ØªÙ‰ ÙŠÙˆØ¶Ø­ Ø§Ù„Ù…Ø´Ù‡Ø¯. Ø§Ù„ØªÙˆØµÙŠØ©: Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø°Ø± Ø¨Ø¹Ø¯ ØªØ£ÙƒÙŠØ¯ØŒ ÙˆØ§Ø°Ø§ Ù…Ø§ ØµØ§Ø± ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ø¶Ø­ØŒ Ù†Ø§Ø·Ø± Ù„Ù„ÙŠÙˆÙ…ÙŠÙ† Ø§Ù„Ø¬Ø§ÙŠÙŠÙ†.\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2816,
        400
      ],
      "id": "7f8f7f52-41ab-43c1-be60-9d5a0afab76b",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').first().json.message.chat.id }}",
        "text": "={{ $json.output.text_message }}",
        "replyMarkup": "forceReply",
        "forceReply": {},
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3040,
        96
      ],
      "id": "e809a34c-8777-4fb1-b95a-51d53e4bf4df",
      "name": "Send a text message",
      "webhookId": "511825a0-29ef-4125-a7f9-371d92e1330c",
      "credentials": {
        "telegramApi": {
          "id": "hzUucFWrHcaeKjJ0",
          "name": "market analysis bot"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "input": "={{ $json.output.voice_message }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        2992,
        416
      ],
      "id": "3b9a43ea-7a4e-4beb-853a-d64ea0b53700",
      "name": "Generate audio",
      "credentials": {
        "openAiApi": {
          "id": "FOyt8lmzygjunRfj",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAudio",
        "chatId": "={{ $('Telegram Trigger').first().json.message.chat.id }}",
        "binaryData": true,
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3248,
        416
      ],
      "id": "6f510d05-7b82-40fd-80ee-aa7312b245f0",
      "name": "Send an audio file",
      "webhookId": "4becbdf2-8c8f-4f46-b790-f5173c0cccb2",
      "credentials": {
        "telegramApi": {
          "id": "hzUucFWrHcaeKjJ0",
          "name": "market analysis bot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const today = new Date();\n\nconst formattedDate = today.toLocaleDateString(\"en-GB\", {\n  day: \"2-digit\",\n  month: \"2-digit\",\n  year: \"numeric\"\n});\n\nreturn [{\n  json: {\n    ...$json,\n    today: formattedDate\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2416,
        96
      ],
      "id": "bf3b1de3-c053-41ab-93ee-1582fbfbec5a",
      "name": "Add Current Date"
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "this",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candles 15m": {
      "main": [
        [
          {
            "node": "15m â€“ Split Candles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candles 5m": {
      "main": [
        [
          {
            "node": "5m â€“ Split Candles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candles 1h": {
      "main": [
        [
          {
            "node": "1H â€“ Split Candles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candles 4h": {
      "main": [
        [
          {
            "node": "4H â€“ Split Candles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candles 1D": {
      "main": [
        [
          {
            "node": "1D â€“ Split Candles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candles 1Week": {
      "main": [
        [
          {
            "node": "1W â€“ Split Candles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "5m â€“ Split Candles": {
      "main": [
        [
          {
            "node": "5m â€“ Prepare Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "15m â€“ Split Candles": {
      "main": [
        [
          {
            "node": "15m â€“ Prepare Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1H â€“ Split Candles": {
      "main": [
        [
          {
            "node": "1hâ€“ Prepare Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4H â€“ Split Candles": {
      "main": [
        [
          {
            "node": "4h â€“ Prepare Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1D â€“ Split Candles": {
      "main": [
        [
          {
            "node": "1D â€“ Prepare Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1W â€“ Split Candles": {
      "main": [
        [
          {
            "node": "1W â€“ Prepare Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "15m â€“ Prepare Data": {
      "main": [
        [
          {
            "node": "15m â€“ Structure Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "5m â€“ Prepare Data": {
      "main": [
        [
          {
            "node": "5m â€“ Structure Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1hâ€“ Prepare Data": {
      "main": [
        [
          {
            "node": "1h â€“ Structure Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4h â€“ Prepare Data": {
      "main": [
        [
          {
            "node": "4h â€“ Structure Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1D â€“ Prepare Data": {
      "main": [
        [
          {
            "node": "1D â€“ Structure Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1W â€“ Prepare Data": {
      "main": [
        [
          {
            "node": "1Wâ€“ Structure Engine1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Dynamic News Filter Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dynamic News Filter Engine": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Merge Technical & News",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "15m â€“ Structure Engine": {
      "main": [
        [
          {
            "node": "Merge Timeframes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "5m â€“ Structure Engine": {
      "main": [
        [
          {
            "node": "Merge Timeframes",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "1h â€“ Structure Engine": {
      "main": [
        [
          {
            "node": "Merge Timeframes",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "4h â€“ Structure Engine": {
      "main": [
        [
          {
            "node": "Merge Timeframes",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "1D â€“ Structure Engine": {
      "main": [
        [
          {
            "node": "Merge Timeframes",
            "type": "main",
            "index": 4
          }
        ]
      ]
    },
    "1Wâ€“ Structure Engine1": {
      "main": [
        [
          {
            "node": "Merge Timeframes",
            "type": "main",
            "index": 5
          }
        ]
      ]
    },
    "Merge Timeframes": {
      "main": [
        [
          {
            "node": "Build Unified Candle Array",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Unified Candle Array": {
      "main": [
        [
          {
            "node": "Merge Technical & News",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Technical & News": {
      "main": [
        [
          {
            "node": "Final Market Context Builder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Final Market Context Builder": {
      "main": [
        [
          {
            "node": "Add Current Date",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "this": {
      "main": [
        [
          {
            "node": "Get Candles 15m",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Candles 5m",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Candles 1h",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Candles 4h",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Candles 1D",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Candles 1Week",
            "type": "main",
            "index": 0
          },
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          },
          {
            "node": "Generate audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message": {
      "main": [
        []
      ]
    },
    "Generate audio": {
      "main": [
        [
          {
            "node": "Send an audio file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Current Date": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "c173a545-ee84-413f-bf1d-948ad27168e8",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "788588a845777cd319fa9655e4e1b96573b8e9b75b00d24b99a8c8193600abe5"
  },
  "id": "yXCoV058VLeUV8ADd7AAd",
  "tags": []
}